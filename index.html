<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Image Upload & Share</title>
  <style>
    body { font-family: 'Inter', 'Segoe UI', Arial, sans-serif; margin: 0; padding: 0; background: #f6f8fb; }
    
    /* Header Styles */
    .main-header {
      background: #fff;
      border-bottom: 1px solid #e1e5e9;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 64px;
    }
    
    .logo {
      display: flex;
      align-items: center;
    }
    
    .logo-img {
      height: 32px;
      cursor: pointer;
      transition: transform 0.2s;
    }
    
    .logo-img:hover {
      transform: scale(1.05);
    }
    
    .main-nav {
      display: flex;
      gap: 32px;
      align-items: center;
    }
    
    .nav-link {
      text-decoration: none;
      color: #666;
      font-weight: 500;
      font-size: 14px;
      padding: 8px 16px;
      border-radius: 6px;
      transition: all 0.2s;
      position: relative;
    }
    
    .nav-link:hover {
      color: #007bff;
      background: #f8f9fa;
    }
    
    .nav-link.active {
      color: #007bff;
      background: #e3f2fd;
    }
    
    .user-actions {
      display: flex;
      gap: 12px;
      align-items: center;
    }
    
    .login-btn {
      text-decoration: none;
      color: #007bff;
      font-weight: 500;
      font-size: 14px;
      padding: 8px 16px;
      border-radius: 6px;
      transition: all 0.2s;
    }
    
    .login-btn:hover {
      background: #f8f9fa;
    }
    
    .signup-btn {
      text-decoration: none;
      color: #fff;
      background: #007bff;
      font-weight: 500;
      font-size: 14px;
      padding: 8px 16px;
      border-radius: 6px;
      transition: all 0.2s;
    }
    
    .signup-btn:hover {
      background: #0056b3;
    }
    
    .mobile-menu-btn {
      display: none;
      flex-direction: column;
      gap: 4px;
      background: none;
      border: none;
      cursor: pointer;
      padding: 8px;
    }
    
    .mobile-menu-btn span {
      width: 24px;
      height: 2px;
      background: #666;
      transition: all 0.3s;
    }
    
    /* Desktop styles - hide mobile menu */
    .mobile-menu {
      display: none;
    }
    
    /* Mobile responsive */
    @media (max-width: 768px) {
      .main-nav {
        display: none;
      }
      
      .user-actions {
        display: none;
      }
      
      .mobile-menu-btn {
        display: flex;
      }
      
      .header-content {
        padding: 0 15px;
      }
      
      /* Mobile menu styles */
      .mobile-menu {
        display: block;
        position: fixed;
        top: 64px;
        left: 0;
        right: 0;
        background: #fff;
        border-bottom: 1px solid #e1e5e9;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        transform: translateY(-100%);
        transition: transform 0.3s ease;
        z-index: 999;
      }
      
      .mobile-menu.show {
        transform: translateY(0);
      }
      
      .mobile-menu-content {
        padding: 20px;
        display: flex;
        flex-direction: column;
        gap: 16px;
      }
      
      .mobile-nav-link {
        text-decoration: none;
        color: #666;
        font-weight: 500;
        font-size: 16px;
        padding: 12px 16px;
        border-radius: 6px;
        transition: all 0.2s;
      }
      
      .mobile-nav-link:hover {
        color: #007bff;
        background: #f8f9fa;
      }
      
      .mobile-nav-link.active {
        color: #007bff;
        background: #e3f2fd;
      }
      
      .mobile-user-actions {
        display: flex;
        gap: 12px;
        margin-top: 16px;
        padding-top: 16px;
        border-top: 1px solid #e1e5e9;
      }
      
      .mobile-login-btn {
        text-decoration: none;
        color: #007bff;
        font-weight: 500;
        font-size: 16px;
        padding: 12px 16px;
        border-radius: 6px;
        transition: all 0.2s;
        flex: 1;
        text-align: center;
      }
      
      .mobile-signup-btn {
        text-decoration: none;
        color: #fff;
        background: #007bff;
        font-weight: 500;
        font-size: 16px;
        padding: 12px 16px;
        border-radius: 6px;
        transition: all 0.2s;
        flex: 1;
        text-align: center;
      }
    }
    .page-title {
      text-align: center;
      padding: 40px 20px 20px;
      max-width: 800px;
      margin: 0 auto;
    }
    
    h1 {
      text-align: center;
      font-size: 3.5rem;
      font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
      font-weight: 900;
      margin-bottom: 0;
      letter-spacing: 0.03em;
      line-height: 1.12;
      width: 100%;
    }
    .subtitle {
      text-align: center;
      color: #888;
      margin-top: 60px;
      margin-bottom: 48px;
      font-size: 1.18rem;
      font-weight: 400;
      letter-spacing: 0.01em;
    }
    #dropArea {
      border: 2.5px solid #b3d8fd;
      border-radius: 12px;
      padding: 36px 0;
      text-align: center;
      color: #007bff;
      background: #fafdff;
      margin-bottom: 38px;
      width: 100%;
      font-size: 1.13rem;
      transition: background 0.2s, border-color 0.2s, box-shadow 0.2s;
      cursor: pointer;
      font-weight: 500;
      box-shadow: 0 2px 12px rgba(0,123,255,0.04);
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
    #dropArea.dragover {
      background: #eaf4ff;
      border-color: #90c2fa;
      color: #0056b3;
      box-shadow: 0 4px 24px rgba(0,123,255,0.10);
    }

    button[type="submit"] {
      background: linear-gradient(90deg, #2196f3 0%, #007bff 100%);
      color: #fff;
      border: none;
      border-radius: 8px;
      transition: background 0.2s, box-shadow 0.2s, transform 0.1s;
      box-shadow: 0 2px 8px rgba(0,123,255,0.08);
      font-size: 1.22rem;
      font-weight: 700;
      padding: 0 48px;
      margin-top: 10px;
      margin-bottom: 18px;
      width: auto;
      min-width: 220px;
      outline: none;
      height: 54px;
      line-height: 54px;
      display: flex;
      align-items: center;
      justify-content: center;
      letter-spacing: 0.01em;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
    button[type="submit"]:hover, button[type="submit"]:focus {
      background: linear-gradient(90deg, #007bff 0%, #2196f3 100%);
      box-shadow: 0 6px 24px rgba(0,86,179,0.13);
      transform: translateY(-2px) scale(1.03);
    }
    button[type="button"] {
      background: linear-gradient(90deg, #2196f3 0%, #007bff 100%);
      color: #fff;
      border: none;
      border-radius: 8px;
      transition: background 0.2s, box-shadow 0.2s, transform 0.1s;
      box-shadow: 0 2px 8px rgba(0,123,255,0.08);
      font-size: 1rem;
      font-weight: 600;
      padding: 8px 18px;
      outline: none;
      margin-left: 6px;
    }
    button[type="button"]:hover, button[type="button"]:focus {
      background: linear-gradient(90deg, #007bff 0%, #2196f3 100%);
      box-shadow: 0 6px 24px rgba(0,86,179,0.13);
      transform: translateY(-1px) scale(1.04);
    }
    button[onclick^="deleteHistory"] {
      background: #f44336 !important;
      color: #fff !important;
      border-radius: 8px;
      margin-left: 6px;
      box-shadow: 0 2px 8px rgba(244,67,54,0.08);
      font-weight: 600;
    }
    button[onclick^="deleteHistory"]:hover, button[onclick^="deleteHistory"]:focus {
      background: #d32f2f !important;
      box-shadow: 0 6px 24px rgba(244,67,54,0.13);
    }
    #fileRow {
      width: 100%;
      margin-bottom: 10px;
    }
    #fileName {
      font-size: 1.05rem;
      color: #555;
      font-weight: 400;
    }
    .result {
      margin-top: 38px;
      text-align: center;
      font-size: 1.13rem;
      width: 100%;
      max-width: 480px;
      margin-left: auto;
      margin-right: auto;
      background: none;
      border-radius: 0;
      box-shadow: none;
      padding: 0;
      display: none;
    }
    .result.show {
      display: block;
    }
    .result img {
      border-radius: 10px;
      box-shadow: 0 1px 6px rgba(0,0,0,0.08);
      margin-bottom: 18px;
      max-width: 100%;
      height: auto;
    }
    .result .copy-row {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-bottom: 12px;
    }
    .result input[type="text"] {
      width: 60%;
      font-size: 0.98rem;
      border: 1px solid #e0e0e0;
      border-radius: 6px;
      padding: 6px 8px;
      background: #fafbfc;
      margin-right: 0;
    }
    .result button[type="button"] {
      margin-left: 0;
      min-width: 70px;
    }
    .result a {
      color: #007bff;
      text-decoration: underline;
      font-size: 1.08rem;
      margin-top: 10px;
      display: inline-block;
    }
    /* 上传区与按钮间距拉开 */
    #dropArea {
      margin-bottom: 38px;
    }
    #history {
      margin-top: 40px;
      background: #f8f9fa;
      border-radius: 10px;
      padding: 22px 16px;
      box-shadow: 0 1px 6px rgba(0,0,0,0.04);
      width: 100%;
      max-width: 600px;
    }
    #history b {
      font-size: 1.13rem;
      font-weight: 700;
    }
    #history a {
      color: #007bff;
      word-break: break-all;
    }
    #history img {
      display: block;
      margin: 8px auto 0 auto;
      border-radius: 6px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.06);
    }
    #history hr {
      margin: 16px 0;
    }
    #toast {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%,-50%) scale(0.98);
      background: rgba(30, 30, 30, 0.82);
      color: #fff;
      padding: 20px 36px;
      border-radius: 22px;
      font-size: 1.13rem;
      z-index: 9999;
      box-shadow: 0 6px 32px 0 rgba(0,0,0,0.18), 0 1.5px 6px 0 rgba(0,0,0,0.10);
      text-align: center;
      min-width: 180px;
      max-width: 92vw;
      font-weight: 600;
      letter-spacing: 0.01em;
      white-space: pre-line;
      word-break: keep-all;
      transition: opacity 0.32s cubic-bezier(.4,0,.2,1), transform 0.32s cubic-bezier(.4,0,.2,1);
      opacity: 0;
      pointer-events: none;
      backdrop-filter: blur(8px) saturate(1.2);
      -webkit-backdrop-filter: blur(8px) saturate(1.2);
      line-height: 1.5;
    }
    
    /* Toast type styles */
    #toast.toast-error {
      background: rgba(220, 53, 69, 0.9);
      border-left: 4px solid #dc3545;
    }
    
    #toast.toast-success {
      background: rgba(40, 167, 69, 0.9);
      border-left: 4px solid #28a745;
    }
    
    #toast.toast-warning {
      background: rgba(255, 193, 7, 0.9);
      color: #212529;
      border-left: 4px solid #ffc107;
    }
    #toast.toast-show {
      display: block;
      opacity: 1;
      transform: translate(-50%,-50%) scale(1);
      pointer-events: auto;
    }
    /* 让文件选择行居中 */
    #fileRow {
      width: 100%;
      margin-bottom: 10px;
      display: flex !important;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    /* 上传结果区每行横向布局，标签宽度统一，按钮紧贴input */
    .result .copy-row {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0;
      margin-bottom: 16px;
      width: 100%;
      flex-wrap: wrap;
    }
    .result .copy-label {
      width: 110px;
      min-width: 90px;
      text-align: right;
      font-size: 1.08rem;
      font-weight: 500;
      color: #222;
      margin-right: 10px;
      white-space: nowrap;
      flex-shrink: 0;
    }
    .result input[type="text"] {
      width: 60%;
      min-width: 0;
      font-size: 0.98rem;
      border: 1px solid #e0e0e0;
      border-radius: 6px;
      padding: 6px 8px;
      background: #fafbfc;
      margin-right: 0;
      flex: 1 1 120px;
    }
    .result button[type="button"] {
      margin-left: 10px;
      min-width: 70px;
      flex-shrink: 0;
    }
    /* 响应式：移动端100%宽度，自动换行 */
    @media (max-width: 600px) {
      h1 { font-size: 1.5rem; }
      .subtitle { font-size: 1rem; }
      #dropArea { padding: 10vw 2vw; font-size: 1rem; }
      button[type="submit"] { font-size: 1rem; padding: 12px 0; }
      #toast { font-size: 1.01rem; padding: 14px 6vw; min-width: 120px; line-height: 1.7; }
      .header-container { padding: 0 15px; }
      .manage-btn { position: static; transform: none; margin-top: 10px; }
      .result .copy-row {
        flex-direction: column;
        align-items: stretch;
        gap: 6px;
      }
      .result .copy-label {
        text-align: left;
        margin-bottom: 2px;
        margin-right: 0;
        width: 100%;
      }
      .result input[type="text"] {
        width: 100%;
        margin-bottom: 4px;
      }
      .result button[type="button"] {
        width: 100%;
        margin-left: 0;
      }
      #fileRow {
        flex-direction: column;
        align-items: stretch;
        gap: 6px;
      }
    }
    /* CSS优化：结果区每行标签左对齐，input和按钮100%宽度，内容可换行，整体平铺页面不包裹在卡片。下方内容最大宽度放宽，移动端100%宽度。*/
    .result { max-width: 100vw; }
    .result .copy-row { display: flex; align-items: flex-start; justify-content: flex-start; gap: 0; margin-bottom: 16px; width: 100%; flex-wrap: wrap; }
    .result .copy-label { min-width: 120px; max-width: 220px; text-align: left; font-size: 1.08rem; font-weight: 500; color: #222; margin-right: 10px; white-space: pre-line; flex-shrink: 0; word-break: break-all; display: flex; align-items: center; }
    .result input[type="text"] { width: 100%; min-width: 0; font-size: 0.98rem; border: 1px solid #e0e0e0; border-radius: 6px; padding: 6px 8px; background: #fafbfc; margin-right: 0; flex: 1 1 120px; word-break: break-all; }
    .result button[type="button"] { margin-left: 10px; min-width: 70px; flex-shrink: 0; }
    @media (max-width: 900px) {
      .result-flex {
        gap: 20px;
      }
      .result-thumb img {
        max-width: 250px;
        max-height: 250px;
      }
      .result-links {
        width: 90%;
        max-width: 700px;
      }
    }
    @media (max-width: 600px) {
  .upload-container {
    padding: 0 15px;
  }
  .result-flex {
    gap: 16px;
    width: 100%;
    max-width: 100%;
    overflow-x: hidden;
  }
  .result-thumb img {
    max-width: 280px;
    max-height: 280px;
    width: 100%;
    height: auto;
  }
  .result-links {
    width: 100%;
    max-width: 100%;
    text-align: left;
    padding: 0 4px;
    box-sizing: border-box;
    overflow-x: hidden;
  }
  .result-links .copy-row {
    flex-direction: column;
    align-items: stretch;
    gap: 8px;
    margin-bottom: 16px;
    justify-content: flex-start;
  }
  .result-links .copy-label {
    width: 100% !important;
    max-width: 100% !important;
    margin-bottom: 8px !important;
    font-size: 1rem !important;
    text-align: center !important;
    justify-content: center !important;
    margin-right: 0 !important;
    display: flex !important;
    align-items: center !important;
  }
  .result-links input[type="text"] {
    width: 100% !important;
    margin-bottom: 8px !important;
    font-size: 0.9rem !important;
    padding: 12px 12px !important;
    min-width: 0 !important;
    max-width: 100% !important;
    word-break: break-all !important;
    white-space: pre-wrap !important;
    box-sizing: border-box !important;
    overflow-x: visible !important;
    height: auto !important;
    min-height: 44px !important;
    border: 1px solid #d0d0d0 !important;
    border-radius: 6px !important;
    background: #f8f9fa !important;
    font-family: 'Courier New', monospace !important;
  }
  .result-links button[type="button"] {
    width: 120px;
    align-self: center;
    font-size: 0.95rem;
    padding: 12px 16px;
    margin-left: 0;
    margin-top: 4px;
    min-width: 0;
    border: 1px solid #007bff;
    border-radius: 6px;
    background: #007bff;
    color: white;
  }
}
    .upload-container {
      max-width: 100%;
      width: 100%;
      margin: 0 auto;
      padding: 0 20px;
      box-sizing: border-box;
    }
    .result {
      width: 100%;
      max-width: 100%;
      margin: 0 auto;
      padding: 0;
      background: transparent;
      border: none;
      box-shadow: none;
    }
    /* CSS优化：图片缩略图居左，宽度固定，链接区最大宽度600px，input和按钮宽度自适应，整体平铺页面。*/
    .result-flex {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 24px;
      width: 100%;
      max-width: 100%;
    }
    .result-thumb {
      text-align: center;
      margin-bottom: 0;
    }
    .result-thumb img {
      max-width: 280px;
      max-height: 280px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      object-fit: contain;
    }

    .result-links {
      width: 66%;
      max-width: 900px;
      min-width: 0;
      margin: 0 auto;
      text-align: left;
    }
    .result-links .copy-row {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 0;
  margin-bottom: 16px;
  width: 100%;
  flex-wrap: nowrap;
}
    .result-links .copy-label {
      text-align: right;
      font-size: 1.08rem;
      font-weight: 500;
      color: #222;
      margin-right: 12px;
      white-space: nowrap;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: flex-end;
    }
    .result-links .copy-label svg,
    .result-links .copy-label img {
      vertical-align: middle;
      margin-right: 6px;
      flex-shrink: 0;
    }
      .result-links .copy-label img {
    position: relative !important;
    top: 6px !important;
  }
  .result-links .copy-label svg,
  .result-links .copy-label img {
    margin-right: 8px;
  }
    .result-links input[type="text"] {
      flex: 1;
      min-width: 400px;
      font-size: 0.95rem;
      border: 1px solid #d0d0d0;
      border-radius: 6px;
      padding: 10px 14px;
      background: #f8f9fa;
      margin-right: 0;
      word-break: break-all;
      overflow-x: auto;
      white-space: nowrap;
      font-family: 'Courier New', monospace;
      color: #333;
    }
    .result-links input[type="text"]:focus {
      outline: none;
      border-color: #007bff;
      background: #fff;
      box-shadow: 0 0 0 2px rgba(0,123,255,0.1);
    }
    .result-links button[type="button"] {
      margin-left: 12px;
      min-width: 70px;
      flex-shrink: 0;
      white-space: nowrap;
    }
    /* Header container for title and manage button */
    .header-container {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 10px;
      flex-wrap: wrap;
      gap: 15px;
      position: relative;
    }
    .manage-btn {
      background: #28a745;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.95rem;
      font-weight: 500;
      transition: background-color 0.2s;
      position: absolute;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      z-index: 1000;
    }
    .manage-btn:hover {
      background: #218838;
    }
    /* Management panel styles */
    .management-panel {
      display: none;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    .management-panel.show {
      display: block;
    }
    .image-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    .image-item {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 15px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      background: #f8f9fa;
    }
    .image-item img {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 4px;
    }
    .image-info {
      flex: 1;
    }
    .image-name {
      font-weight: 500;
      margin-bottom: 5px;
    }
    .image-url {
      font-size: 0.9rem;
      color: #666;
      word-break: break-all;
    }
    .image-actions {
      display: flex;
      gap: 10px;
    }
    .delete-btn {
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
    }
    .delete-btn:hover {
      background: #c82333;
    }
    .copy-btn {
      background: #007bff;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
    }
    .copy-btn:hover {
      background: #0056b3;
    }
    .back-btn {
      background: #6c757d;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.95rem;
      margin-bottom: 20px;
    }
    .back-btn:hover {
      background: #5a6268;
    }
    
    /* Custom Delete Modal Styles */
    .delete-modal {
      display: none;
      position: fixed;
      z-index: 10000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(4px);
    }
    
    .delete-modal-content {
      background-color: #fff;
      margin: 15% auto;
      padding: 30px;
      border-radius: 12px;
      width: 90%;
      max-width: 400px;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      animation: modalSlideIn 0.3s ease-out;
    }
    
    @keyframes modalSlideIn {
      from {
        opacity: 0;
        transform: translateY(-50px) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    
    .delete-modal h3 {
      margin: 0 0 15px 0;
      color: #333;
      font-size: 1.3rem;
      font-weight: 600;
    }
    
    .delete-modal p {
      margin: 0 0 25px 0;
      color: #666;
      font-size: 1rem;
      line-height: 1.5;
    }
    
    .delete-modal-buttons {
      display: flex;
      gap: 12px;
      justify-content: center;
    }
    
    .delete-confirm-btn {
      background: #dc3545;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 500;
      transition: background-color 0.2s;
    }
    
    .delete-confirm-btn:hover {
      background: #c82333;
    }
    
    .delete-cancel-btn {
      background: #6c757d;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 500;
      transition: background-color 0.2s;
    }
    
    .delete-cancel-btn:hover {
      background: #5a6268;
    }
    
    /* Responsive design for delete modal */
    @media (max-width: 600px) {
      .delete-modal-content {
        margin: 20% auto;
        padding: 25px 20px;
        width: 85%;
      }
      
      .delete-modal h3 {
        font-size: 1.2rem;
      }
      
      .delete-modal p {
        font-size: 0.95rem;
      }
      
      .delete-modal-buttons {
        flex-direction: column;
        gap: 10px;
      }
      
      .delete-confirm-btn,
      .delete-cancel-btn {
        width: 100%;
        padding: 14px 20px;
      }
    }
    
    /* Mobile optimization for management panel - only for very small screens */
    @media (max-width: 480px) {
      .management-panel {
        padding: 15px 10px;
        max-width: 100%;
        margin: 0;
      }
      
      .management-panel h2 {
        font-size: 1.5rem;
        margin-bottom: 15px;
      }
      
      .image-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
        padding: 15px;
        margin-bottom: 10px;
      }
      
      .image-item img {
        width: 100%;
        height: 200px;
        object-fit: cover;
        border-radius: 8px;
        align-self: center;
      }
      
      .image-info {
        width: 100%;
      }
      
      .image-name {
        font-size: 1.1rem;
        margin-bottom: 8px;
        word-break: break-all;
      }
      
      .image-url {
        font-size: 0.85rem;
        margin-bottom: 5px;
        word-break: break-all;
        color: #007bff;
      }
      
      .image-info div:last-child {
        font-size: 0.8rem;
        color: #888;
        margin-top: 8px;
      }
      
      .image-actions {
        width: 100%;
        display: flex;
        gap: 10px;
        justify-content: center;
      }
      
      .copy-btn,
      .delete-btn {
        flex: 1;
        padding: 12px 16px;
        font-size: 0.95rem;
        border-radius: 6px;
      }
      
      .back-btn {
        width: 100%;
        margin-bottom: 15px;
        padding: 12px 20px;
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>
  <!-- Header with Logo and Navigation -->
  <header class="main-header">
    <div class="header-content">
      <!-- Logo -->
      <div class="logo">
        <img src="picfast.png" alt="picfast" class="logo-img">
      </div>
      
      <!-- Navigation -->
      <nav class="main-nav">
        <a href="#" class="nav-link active" id="uploadLink">Upload</a>
        <a href="#" class="nav-link" id="myImagesLink">My Images</a>
        <a href="#" class="nav-link" id="windowsAppLink">Windows App</a>
      </nav>
      
      <!-- User Actions -->
      <div class="user-actions">
        <a href="#" class="login-btn">Login</a>
        <a href="#" class="signup-btn">Sign Up</a>
      </div>
      
      <!-- Mobile Menu Button -->
      <button class="mobile-menu-btn" id="mobileMenuBtn">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </header>
  
  <!-- Mobile Menu -->
  <div class="mobile-menu" id="mobileMenu">
    <div class="mobile-menu-content">
      <a href="#" class="mobile-nav-link active" id="mobileUploadLink">Upload</a>
      <a href="#" class="mobile-nav-link" id="mobileMyImagesLink">My Images</a>
      <a href="#" class="mobile-nav-link" id="mobileWindowsAppLink">Windows App</a>
      
      <div class="mobile-user-actions">
        <a href="#" class="mobile-login-btn">Login</a>
        <a href="#" class="mobile-signup-btn">Sign Up</a>
      </div>
    </div>
  </div>
  <!-- Page Title -->
  <div class="page-title">
    <h1>Image Upload & Share</h1>
    <p class="subtitle">Quickly upload images and get shareable links for free.</p>
  </div>
  <div id="dropArea">Drag & drop image here or <span id="dropChoose" style="color:#007bff;text-decoration:underline;cursor:pointer;">choose file</span></div>
        <input type="file" name="image" id="imageInput" accept="image/*" style="display:none;" />
  <div id="fileName" style="display:none;"></div>
  <div id="progressBar" style="display:none;width:96%;height:8px;background:#e3f0ff;border-radius:4px;overflow:hidden;margin:10px auto 0 auto;max-width:420px;">
    <div id="progressInner" style="height:100%;width:0;background:linear-gradient(90deg,#2196f3 0%,#007bff 100%);transition:width 0.2s;"></div>
  </div>
  <div class="result" id="result"></div>
  
  <!-- Management Panel -->
  <div class="management-panel" id="managementPanel">
    <button class="back-btn" id="backBtn">← Back to Upload</button>
    <h2>Manage Images</h2>
    <div class="image-list" id="imageList">
      <!-- Images will be loaded here -->
    </div>
  </div>
  
  <div id="toast"></div>
  
  <!-- Custom Delete Confirmation Modal -->
  <div id="deleteModal" class="delete-modal">
    <div class="delete-modal-content">
      <h3>Confirm Deletion</h3>
      <p>Are you sure you want to delete this image?</p>
      <div class="delete-modal-buttons">
        <button id="deleteConfirmBtn" class="delete-confirm-btn">Confirm</button>
        <button id="deleteCancelBtn" class="delete-cancel-btn">Cancel</button>
      </div>
    </div>
  </div>
  
  <!-- End flat layout -->
  <script>
    const result = document.getElementById('result');
    // Auto upload logic
    function uploadImage(file) {
      console.log('Upload started for file:', file.name);
      if (!file) return;
      
      // File size check (5MB = 5 * 1024 * 1024 bytes)
      const maxSize = 5 * 1024 * 1024; // 5MB in bytes
      if (file.size > maxSize) {
        showToast('File size too large! Maximum size is 5MB.');
        return;
      }
      
      const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp', 'image/heic', 'image/heif'];
      const isHeicExt = /\.heic$/i.test(file.name) || /\.heif$/i.test(file.name);
      if ((file.type && !allowedTypes.includes(file.type)) && !isHeicExt) {
        showToast('Only jpg, jpeg, png, gif, webp, heic formats are supported!');
        return;
      }
      if (file.type === 'image/heic' || file.type === 'image/heif' || isHeicExt) {
        showToast('HEIC will be converted to JPG for preview.');
      }
      const formData = new FormData();
      formData.append('image', file);
      result.textContent = 'Uploading...';
      result.classList.remove('show');
        const xhr = new XMLHttpRequest();
        xhr.open('POST', '/upload');
        xhr.upload.onprogress = function(e) {
          if (e.lengthComputable) {
            const percent = Math.round((e.loaded / e.total) * 100);
            showProgress(percent);
        } else {
          // If progress cannot be calculated, at least show progress bar
          showProgress(10);
          }
        };
        xhr.onload = function() {
          hideProgress();
          let data = {};
          try { data = JSON.parse(xhr.responseText); } catch {}
          
          // Handle rate limit errors specifically
          if (xhr.status === 429) {
            let message = data.error || 'Rate limit exceeded';
            if (data.blockedUntil) {
              const remainingTime = Math.ceil((data.blockedUntil - Date.now()) / 1000 / 60);
              message = `Rate limit exceeded. Please try again in ${remainingTime} minutes.`;
            }
            showToast(message, 'error');
            result.classList.remove('show');
            result.style.display = 'block';
            result.textContent = message;
            return;
          }
          
          if (data.url) {
          const filename = (fileInput.files[0] && fileInput.files[0].name) || 'image';
          // Use dynamic domain, support deployment
          const baseUrl = window.location.origin;
          const pageLink = `${baseUrl}/img/${data.url.split('/').pop()}`;
          const imageLink = `${baseUrl}${data.imageLink}`;  // 使用后端返回的完整图片链接
          // Two Markdown formats matching postimg
          const markdownReddit = `[${filename}](${pageLink})`;
          const markdownGithub = `[![${filename}](${imageLink})](${pageLink})`;
          // Thumbnail format: use thumbnail link
          const forumThumb = `[url=${pageLink}][img]${pageLink}[/img][/url]`;
          const websiteThumb = `<a href='${pageLink}' target='_blank'><img src='${pageLink}' alt='${filename}' /></a>`;
          // Hotlink format: use direct image link
          const forumHotlink = `[url=${pageLink}][img]${imageLink}[/img][/url]`;
          const websiteHotlink = `<a href='${pageLink}' target='_blank'><img src='${imageLink}' alt='${filename}' /></a>`;
          const removalLink = `${baseUrl}/delete/${data.url.split('/').pop()}`;
                                  // SVG icons
            const redditIcon = `<svg width='24' height='24' viewBox='0 0 24 24' style='vertical-align:middle;margin-right:4px;'><path d='M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z' fill='#FF4500'/></svg>`;
            const githubIcon = `<svg width='24' height='24' viewBox='0 0 20 20' style='vertical-align:middle;margin-right:4px;'><g><circle cx='10' cy='10' r='10' fill='#fff'/><path d='M10 2C5.58 2 2 5.58 2 10c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.01.08-2.1 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.09.16 1.9.08 2.1.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.19 0 .21.15.46.55.38A8.013 8.013 0 0 0 18 10c0-4.42-3.58-8-8-8z' fill='#181717'/><rect x='13' y='13' width='5' height='2' rx='1' fill='#f48024'/></g></svg>`;
          // Escape special characters in HTML strings
          const escapedWebsiteThumb = websiteThumb.replace(/'/g, "\\'").replace(/"/g, '\\"');
          const escapedWebsiteHotlink = websiteHotlink.replace(/'/g, "\\'").replace(/"/g, '\\"');
          result.innerHTML = `
            <div class="result-flex">
              <div class="result-thumb">
                <img src="${data.url}" alt="Image" />
              </div>
              <div class="result-links">
                <div style="margin-bottom:18px;font-weight:bold;font-size:1.18rem;text-align:center;">Upload successful!</div>
                <div class="copy-row"><span class="copy-label">Link:</span><input type="text" value="${pageLink}" readonly /><button type="button" onclick="copyToClipboard('${pageLink}', this)">Copy</button></div>
                <div class="copy-row"><span class="copy-label">Direct link:</span><input type="text" value="${imageLink}" readonly /><button type="button" onclick="copyToClipboard('${imageLink}', this)">Copy</button></div>
                <div class="copy-row"><span class="copy-label">${redditIcon}Markdown:</span><input type="text" value="${markdownReddit}" readonly /><button type="button" onclick="copyToClipboard('${markdownReddit}', this)">Copy</button></div>
                <div class="copy-row"><span class="copy-label">${githubIcon}Markdown:</span><input type="text" value="${markdownGithub}" readonly /><button type="button" onclick="copyToClipboard('${markdownGithub}', this)">Copy</button></div>
                <div class="copy-row"><span class="copy-label">Thumbnail for forums:</span><input type="text" value="${forumThumb}" readonly /><button type="button" onclick="copyToClipboard('${forumThumb}', this)">Copy</button></div>
                <div class="copy-row"><span class="copy-label">Thumbnail for website:</span><input type="text" value="${websiteThumb}" readonly /><button type="button" onclick="copyToClipboard('${escapedWebsiteThumb}', this)">Copy</button></div>
                <div class="copy-row"><span class="copy-label">Hotlink for forums:</span><input type="text" value="${forumHotlink}" readonly /><button type="button" onclick="copyToClipboard('${forumHotlink}', this)">Copy</button></div>
                <div class="copy-row"><span class="copy-label">Hotlink for website:</span><input type="text" value="${websiteHotlink}" readonly /><button type="button" onclick="copyToClipboard('${escapedWebsiteHotlink}', this)">Copy</button></div>
                <div class="copy-row"><span class="copy-label">Removal link:</span><input type="text" value="${removalLink}" readonly /><button type="button" onclick="copyToClipboard('${removalLink}', this)">Copy</button></div>
                <div style="margin-bottom:8px;text-align:center;"><a href="${data.url}" target="_blank">View Image</a></div>
              </div>
            </div>
          `;
          result.classList.add('show');
          result.style.display = 'block';
          console.log('Upload successful, result displayed');
          } else {
          result.classList.remove('show');
          result.style.display = 'block';
            result.textContent = data.error || 'Upload failed';
          }
        };
        xhr.onerror = function() {
          hideProgress();
        result.classList.remove('show');
        result.style.display = 'block';
          result.textContent = 'Upload failed, please try again';
        };
        xhr.send(formData);
      }
    // Drag and drop upload functionality
    // Ensure fileInput2 and fileInput both point to the input element with id imageInput
    const fileInput = document.getElementById('imageInput');
    const fileInput2 = fileInput;
    const fileNameSpan = document.getElementById('fileName');
    const dropArea = document.getElementById('dropArea');
    const dropChoose = document.getElementById('dropChoose');
    dropArea.addEventListener('click', () => fileInput.click());
    dropChoose.addEventListener('click', e => { e.stopPropagation(); fileInput.click(); });
    fileInput.addEventListener('change', () => {
      if (fileInput.files.length) {
        fileNameSpan.textContent = fileInput.files[0].name;
        uploadImage(fileInput.files[0]);
      } else {
        fileNameSpan.textContent = '';
      }
    });
    ['dragenter','dragover'].forEach(evt => dropArea.addEventListener(evt, e => {
      e.preventDefault(); e.stopPropagation(); dropArea.classList.add('dragover');
    }));
    ['dragleave','drop'].forEach(evt => dropArea.addEventListener(evt, e => {
      e.preventDefault(); e.stopPropagation(); dropArea.classList.remove('dragover');
    }));
    dropArea.addEventListener('drop', e => {
      if (e.dataTransfer.files && e.dataTransfer.files.length) {
        fileInput.files = e.dataTransfer.files;
        fileNameSpan.textContent = fileInput.files[0].name;
        uploadImage(fileInput.files[0]);
      }
    });
    // Custom file selection button logic - remove references to non-existent elements

    // Management panel functionality
    const manageBtn = document.getElementById('manageBtn');
    const backBtn = document.getElementById('backBtn');
    const managementPanel = document.getElementById('managementPanel');
    const imageList = document.getElementById('imageList');
    const progressBar = document.getElementById('progressBar');

    // Show management panel
    function showManagementPanel() {
      // Hide main content
      document.getElementById('dropArea').style.display = 'none';
      progressBar.style.display = 'none';
      document.getElementById('result').style.display = 'none';
      document.querySelector('.page-title').style.display = 'none';
      document.querySelector('#fileName').style.display = 'none';
      document.querySelector('#imageInput').style.display = 'none';
      
      // Show management panel
      managementPanel.classList.add('show');
      loadImageList();
      
      // Update navigation
      document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
      document.querySelectorAll('.mobile-nav-link').forEach(link => link.classList.remove('active'));
      document.getElementById('myImagesLink').classList.add('active');
      document.getElementById('mobileMyImagesLink').classList.add('active');
    }

    // Hide management panel
    function hideManagementPanel() {
      // Show main content
      document.getElementById('dropArea').style.display = '';
      document.querySelector('.page-title').style.display = '';
      document.querySelector('#imageInput').style.display = 'none'; // Keep hidden as it should be
      
      // Reset upload state - but keep result content if it exists
      progressBar.style.display = 'none';
      document.getElementById('progressInner').style.width = '0';
      document.getElementById('fileName').style.display = 'none';
      document.getElementById('fileName').textContent = '';
      
      // Clear file input
      document.getElementById('imageInput').value = '';
      
      // Hide management panel
      managementPanel.classList.remove('show');
      
      // Update navigation
      document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
      document.querySelectorAll('.mobile-nav-link').forEach(link => link.classList.remove('active'));
      document.getElementById('uploadLink').classList.add('active');
      document.getElementById('mobileUploadLink').classList.add('active');
    }

    // Load image list
    async function loadImageList() {
      try {
        const response = await fetch('/api/images');
        const images = await response.json();
        
        if (images.length === 0) {
          imageList.innerHTML = '<p style="text-align:center;color:#666;margin:20px;">No images uploaded yet.</p>';
        return;
        }

        // Sort images by upload time, newest first
        const sortedImages = images.sort((a, b) => new Date(b.uploadTime) - new Date(a.uploadTime));

        imageList.innerHTML = sortedImages.map(image => `
          <div class="image-item">
            <img src="${image.directUrl}" alt="${image.originalName}" onerror="this.style.display='none'">
            <div class="image-info">
              <div class="image-name">${image.originalName}</div>
              <div class="image-url">${window.location.origin}${image.url}</div>
              <div style="font-size:0.8rem;color:#888;margin-top:5px;">
                Uploaded: ${new Date(image.uploadTime).toLocaleString()}
              </div>
            </div>
            <div class="image-actions">
              <button class="copy-btn" onclick="copyToClipboard('${window.location.origin}${image.url}', this)">Copy Link</button>
              <button class="delete-btn" onclick="deleteImage('${image.id}', this)">Delete</button>
            </div>
          </div>
        `).join('');
      } catch (error) {
        console.error('Error loading images:', error);
        imageList.innerHTML = '<p style="text-align:center;color:#dc3545;margin:20px;">Error loading images.</p>';
      }
    }

    // Delete image
    async function deleteImage(id, button) {
      // Show custom delete modal
      const deleteModal = document.getElementById('deleteModal');
      const confirmBtn = document.getElementById('deleteConfirmBtn');
      const cancelBtn = document.getElementById('deleteCancelBtn');
      
      deleteModal.style.display = 'block';
      
      // Handle confirm
      const handleConfirm = async () => {
        deleteModal.style.display = 'none';
        button.disabled = true;
        button.textContent = 'Deleting...';

        try {
          const response = await fetch(`/delete/${id}`, { method: 'DELETE' });
          const result = await response.json();

          if (result.success) {
            button.closest('.image-item').remove();
            showToast('Image deleted successfully');
            
            // If no images left, show empty message
            if (imageList.children.length === 0) {
              imageList.innerHTML = '<p style="text-align:center;color:#666;margin:20px;">No images uploaded yet.</p>';
            }
          } else {
            showToast('Failed to delete image');
            button.disabled = false;
            button.textContent = 'Delete';
          }
        } catch (error) {
          console.error('Error deleting image:', error);
          showToast('Error deleting image');
          button.disabled = false;
          button.textContent = 'Delete';
        }
      };
      
      // Handle cancel
      const handleCancel = () => {
        deleteModal.style.display = 'none';
      };
      
      // Add event listeners
      confirmBtn.onclick = handleConfirm;
      cancelBtn.onclick = handleCancel;
      
      // Close modal when clicking outside
      deleteModal.onclick = (e) => {
        if (e.target === deleteModal) {
          handleCancel();
        }
      };
      
      // Close modal with Escape key
      const handleEscape = (e) => {
        if (e.key === 'Escape') {
          handleCancel();
          document.removeEventListener('keydown', handleEscape);
        }
      };
      document.addEventListener('keydown', handleEscape);
    }

    // Event listeners for management panel
    if (manageBtn) {
      manageBtn.addEventListener('click', () => {
        console.log('Manage button clicked');
        showManagementPanel();
      });
    }
    
    if (backBtn) {
      backBtn.addEventListener('click', () => {
        console.log('Back button clicked');
        hideManagementPanel();
      });
    }



    // Copy to clipboard and show toast
    function copyToClipboard(text, btn) {
      navigator.clipboard.writeText(text).then(() => {
        const old = btn.textContent;
        btn.textContent = 'Copied!';
        btn.disabled = true;
        setTimeout(() => {
          btn.textContent = old;
          btn.disabled = false;
        }, 1200);
      });
    }

    function showProgress(percent) {
      const bar = document.getElementById('progressBar');
      const inner = document.getElementById('progressInner');
      bar.style.display = 'block';
      inner.style.width = percent + '%';
    }
    function hideProgress() {
      const bar = document.getElementById('progressBar');
      const inner = document.getElementById('progressInner');
      inner.style.width = '0';
      setTimeout(() => { bar.style.display = 'none'; }, 400);
    }

    // Toast popup
    function showToast(msg, type = 'info') {
      const toast = document.getElementById('toast');
      toast.textContent = msg;
      
      // Remove existing type classes
      toast.classList.remove('toast-error', 'toast-success', 'toast-warning');
      
      // Add type-specific class
      if (type === 'error') {
        toast.classList.add('toast-error');
      } else if (type === 'success') {
        toast.classList.add('toast-success');
      } else if (type === 'warning') {
        toast.classList.add('toast-warning');
      }
      
      toast.classList.add('toast-show');
      setTimeout(() => { toast.classList.remove('toast-show'); }, 3000);
    }

    // Initialize page state
    function initializePage() {
      // Reset upload state
      progressBar.style.display = 'none';
      document.getElementById('progressInner').style.width = '0';
      document.getElementById('fileName').style.display = 'none';
      document.getElementById('fileName').textContent = '';
      document.getElementById('imageInput').value = '';
    }

    // Navigation functionality
    document.getElementById('uploadLink').addEventListener('click', function(e) {
      e.preventDefault();
      showUploadPage();
    });
    
    document.getElementById('myImagesLink').addEventListener('click', function(e) {
      e.preventDefault();
      showManagementPanel();
    });
    
    document.getElementById('windowsAppLink').addEventListener('click', function(e) {
      e.preventDefault();
      showToast('Windows App coming soon!');
    });
    
    // Logo click functionality
    document.querySelector('.logo-img').addEventListener('click', function() {
      showUploadPage();
    });
    
    // Mobile menu functionality
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    
    mobileMenuBtn.addEventListener('click', function() {
      mobileMenu.classList.toggle('show');
      
      // Animate hamburger menu
      const spans = this.querySelectorAll('span');
      if (mobileMenu.classList.contains('show')) {
        spans[0].style.transform = 'rotate(45deg) translate(5px, 5px)';
        spans[1].style.opacity = '0';
        spans[2].style.transform = 'rotate(-45deg) translate(7px, -6px)';
      } else {
        spans[0].style.transform = 'none';
        spans[1].style.opacity = '1';
        spans[2].style.transform = 'none';
      }
    });
    
    // Mobile navigation links
    document.getElementById('mobileUploadLink').addEventListener('click', function(e) {
      e.preventDefault();
      showUploadPage();
      closeMobileMenu();
    });
    
    document.getElementById('mobileMyImagesLink').addEventListener('click', function(e) {
      e.preventDefault();
      showManagementPanel();
      closeMobileMenu();
    });
    
    document.getElementById('mobileWindowsAppLink').addEventListener('click', function(e) {
      e.preventDefault();
      showToast('Windows App coming soon!');
      closeMobileMenu();
    });
    
    // Close mobile menu function
    function closeMobileMenu() {
      mobileMenu.classList.remove('show');
      const spans = mobileMenuBtn.querySelectorAll('span');
      spans[0].style.transform = 'none';
      spans[1].style.opacity = '1';
      spans[2].style.transform = 'none';
    }
    
    // Close mobile menu when clicking outside
    document.addEventListener('click', function(e) {
      if (!mobileMenuBtn.contains(e.target) && !mobileMenu.contains(e.target)) {
        closeMobileMenu();
      }
    });
    
    // Show upload page function
    function showUploadPage() {
      // Hide management panel if visible
      document.getElementById('managementPanel').classList.remove('show');
      
      // Show main content
      document.getElementById('dropArea').style.display = '';
      document.querySelector('.page-title').style.display = '';
      document.querySelector('#imageInput').style.display = 'none';
      
      // Reset upload state
      progressBar.style.display = 'none';
      document.getElementById('progressInner').style.width = '0';
      document.getElementById('fileName').style.display = 'none';
      document.getElementById('fileName').textContent = '';
      document.getElementById('imageInput').value = '';
      
      // Update navigation
      document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
      document.querySelectorAll('.mobile-nav-link').forEach(link => link.classList.remove('active'));
      document.getElementById('uploadLink').classList.add('active');
      document.getElementById('mobileUploadLink').classList.add('active');
    }
    
    // Initialize page on load
    window.onload = initializePage;

    function copyHtmlToClipboard(btn) {
      const input = btn.previousElementSibling;
      const html = input.value.replace(/&quot;/g, '"').replace(/&lt;/g, '<').replace(/&gt;/g, '>');
      navigator.clipboard.writeText(html).then(() => {
        const old = btn.textContent;
        btn.textContent = 'Copied!';
        btn.disabled = true;
        setTimeout(() => {
          btn.textContent = old;
          btn.disabled = false;
        }, 1200);
      });
    }
  </script>
</body>
</html> 